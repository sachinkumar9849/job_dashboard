{"ast":null,"code":"import axios from 'axios';\nimport { clearStore } from '../features/user/userSlice';\nimport { getUserFromLocalStorage } from './localStorage';\nconst customFetch = axios.create({\n  baseURL: 'https://jobify-prod.herokuapp.com/api/v1/toolkit'\n});\ncustomFetch.interceptors.request.use(config => {\n  const user = getUserFromLocalStorage();\n  if (user) {\n    config.headers['Authorization'] = `Bearer ${user.token}`;\n  }\n  return config;\n});\nexport const checkForUnauthorizedResponse = (error, thunkAPI) => {\n  if (error.response.status === 401) {\n    thunkAPI.dispatch(clearStore());\n    return thunkAPI.rejectWithValue('Unauthorized! Logging Out...');\n  }\n  return thunkAPI.rejectWithValue(error.response.data.msg);\n};\nexport default customFetch;","map":{"version":3,"names":["axios","clearStore","getUserFromLocalStorage","customFetch","create","baseURL","interceptors","request","use","config","user","headers","token","checkForUnauthorizedResponse","error","thunkAPI","response","status","dispatch","rejectWithValue","data","msg"],"sources":["C:/Reactjs/redux-toolkit-jobster/src/utils/axios.js"],"sourcesContent":["import axios from 'axios';\r\nimport { clearStore } from '../features/user/userSlice';\r\nimport { getUserFromLocalStorage } from './localStorage';\r\n\r\nconst customFetch = axios.create({\r\n  baseURL: 'https://jobify-prod.herokuapp.com/api/v1/toolkit',\r\n});\r\n\r\ncustomFetch.interceptors.request.use((config) => {\r\n  const user = getUserFromLocalStorage();\r\n  if (user) {\r\n    config.headers['Authorization'] = `Bearer ${user.token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\nexport const checkForUnauthorizedResponse = (error, thunkAPI) => {\r\n  if (error.response.status === 401) {\r\n    thunkAPI.dispatch(clearStore());\r\n    return thunkAPI.rejectWithValue('Unauthorized! Logging Out...');\r\n  }\r\n  return thunkAPI.rejectWithValue(error.response.data.msg);\r\n};\r\n\r\nexport default customFetch;\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,4BAA4B;AACvD,SAASC,uBAAuB,QAAQ,gBAAgB;AAExD,MAAMC,WAAW,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC/BC,OAAO,EAAE;AACX,CAAC,CAAC;AAEFF,WAAW,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EAC/C,MAAMC,IAAI,GAAGR,uBAAuB,EAAE;EACtC,IAAIQ,IAAI,EAAE;IACRD,MAAM,CAACE,OAAO,CAAC,eAAe,CAAC,GAAI,UAASD,IAAI,CAACE,KAAM,EAAC;EAC1D;EACA,OAAOH,MAAM;AACf,CAAC,CAAC;AAEF,OAAO,MAAMI,4BAA4B,GAAG,CAACC,KAAK,EAAEC,QAAQ,KAAK;EAC/D,IAAID,KAAK,CAACE,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACjCF,QAAQ,CAACG,QAAQ,CAACjB,UAAU,EAAE,CAAC;IAC/B,OAAOc,QAAQ,CAACI,eAAe,CAAC,8BAA8B,CAAC;EACjE;EACA,OAAOJ,QAAQ,CAACI,eAAe,CAACL,KAAK,CAACE,QAAQ,CAACI,IAAI,CAACC,GAAG,CAAC;AAC1D,CAAC;AAED,eAAelB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}