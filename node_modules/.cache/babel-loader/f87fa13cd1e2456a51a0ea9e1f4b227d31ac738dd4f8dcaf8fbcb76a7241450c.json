{"ast":null,"code":"import _defineProperty from\"C:/Reactjs/redux-toolkit-jobster/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Reactjs/redux-toolkit-jobster/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Reactjs/redux-toolkit-jobster/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{Logo,FormRow}from'../components';import Wrapper from'../assets/wrappers/RegisterPage';import{toast}from'react-toastify';import{useDispatch,useSelector}from'react-redux';import{loginUser,registerUser}from'../features/user/userSlice';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={name:'',email:'',password:'',isMember:true};function Register(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useSelector=useSelector(function(store){return store.user;}),user=_useSelector.user,isLoading=_useSelector.isLoading;var dispatch=useDispatch();var navigate=useNavigate();var handleChange=function handleChange(e){var name=e.target.name;var value=e.target.value;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));};var onSubmit=function onSubmit(e){e.preventDefault();var name=values.name,email=values.email,password=values.password,isMember=values.isMember;if(!email||!password||!isMember&&!name){toast.error('Please fill out all fields');return;}if(isMember){dispatch(loginUser({email:email,password:password}));return;}dispatch(registerUser({name:name,email:email,password:password}));};var toggleMember=function toggleMember(){setValues(_objectSpread(_objectSpread({},values),{},{isMember:!values.isMember}));};useEffect(function(){if(user){setTimeout(function(){navigate('/');},2000);}},[user]);return/*#__PURE__*/_jsx(Wrapper,{className:\"full-page\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(\"h3\",{children:values.isMember?'Login':'Register'}),!values.isMember&&/*#__PURE__*/_jsx(FormRow,{type:\"text\",name:\"name\",value:values.name,handleChange:handleChange}),/*#__PURE__*/_jsx(FormRow,{type:\"email\",name:\"email\",value:values.email,handleChange:handleChange}),/*#__PURE__*/_jsx(FormRow,{type:\"password\",name:\"password\",value:values.password,handleChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-block\",disabled:isLoading,children:isLoading?'loading...':'submit'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-block btn-hipster\",disabled:isLoading,onClick:function onClick(){return dispatch(loginUser({email:'testUser@test.com',password:'secret'}));},children:isLoading?'loading...':'demo app'}),/*#__PURE__*/_jsxs(\"p\",{children:[values.isMember?'Not a member yet?':'Already a member?',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:toggleMember,className:\"member-btn\",children:values.isMember?'Register':'Login'})]})]})});}export default Register;","map":{"version":3,"names":["useState","useEffect","Logo","FormRow","Wrapper","toast","useDispatch","useSelector","loginUser","registerUser","useNavigate","initialState","name","email","password","isMember","Register","values","setValues","store","user","isLoading","dispatch","navigate","handleChange","e","target","value","onSubmit","preventDefault","error","toggleMember","setTimeout"],"sources":["C:/Reactjs/redux-toolkit-jobster/src/pages/Register.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Logo, FormRow } from '../components';\r\nimport Wrapper from '../assets/wrappers/RegisterPage';\r\nimport { toast } from 'react-toastify';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { loginUser, registerUser } from '../features/user/userSlice';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst initialState = {\r\n  name: '',\r\n  email: '',\r\n  password: '',\r\n  isMember: true,\r\n};\r\n\r\nfunction Register() {\r\n  const [values, setValues] = useState(initialState);\r\n  const { user, isLoading } = useSelector((store) => store.user);\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const handleChange = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { name, email, password, isMember } = values;\r\n    if (!email || !password || (!isMember && !name)) {\r\n      toast.error('Please fill out all fields');\r\n      return;\r\n    }\r\n    if (isMember) {\r\n      dispatch(loginUser({ email: email, password: password }));\r\n      return;\r\n    }\r\n    dispatch(registerUser({ name, email, password }));\r\n  };\r\n\r\n  const toggleMember = () => {\r\n    setValues({ ...values, isMember: !values.isMember });\r\n  };\r\n  useEffect(() => {\r\n    if (user) {\r\n      setTimeout(() => {\r\n        navigate('/');\r\n      }, 2000);\r\n    }\r\n  }, [user]);\r\n  return (\r\n    <Wrapper className='full-page'>\r\n      <form className='form' onSubmit={onSubmit}>\r\n        <Logo />\r\n        <h3>{values.isMember ? 'Login' : 'Register'}</h3>\r\n        {/* name field */}\r\n        {!values.isMember && (\r\n          <FormRow\r\n            type='text'\r\n            name='name'\r\n            value={values.name}\r\n            handleChange={handleChange}\r\n          />\r\n        )}\r\n        {/* email field */}\r\n        <FormRow\r\n          type='email'\r\n          name='email'\r\n          value={values.email}\r\n          handleChange={handleChange}\r\n        />\r\n        {/* password field */}\r\n        <FormRow\r\n          type='password'\r\n          name='password'\r\n          value={values.password}\r\n          handleChange={handleChange}\r\n        />\r\n        <button type='submit' className='btn btn-block' disabled={isLoading}>\r\n          {isLoading ? 'loading...' : 'submit'}\r\n        </button>\r\n        <button\r\n          type='button'\r\n          className='btn btn-block btn-hipster'\r\n          disabled={isLoading}\r\n          onClick={() =>\r\n            dispatch(\r\n              loginUser({ email: 'testUser@test.com', password: 'secret' })\r\n            )\r\n          }\r\n        >\r\n          {isLoading ? 'loading...' : 'demo app'}\r\n        </button>\r\n        <p>\r\n          {values.isMember ? 'Not a member yet?' : 'Already a member?'}\r\n          <button type='button' onClick={toggleMember} className='member-btn'>\r\n            {values.isMember ? 'Register' : 'Login'}\r\n          </button>\r\n        </p>\r\n      </form>\r\n    </Wrapper>\r\n  );\r\n}\r\nexport default Register;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}